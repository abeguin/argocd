# Application Controller - Handle sync operations efficiently

controller:
  replicas: 2
  resources:
    requests:
      cpu: 250m
      memory: 512Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  # Increase operation concurrency
  extraArgs:
    - --operation-processors=20

# Server - Handle API requests
server:
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Enable autoscaling
  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 5
    targetCPUUtilizationPercentage: 70

# Redis - Critical for performance
redis:
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

redisSecretInit:
  enabled: false

# Repo Server - Manifest generation
repoServer:
  replicas: 2
  resources:
    requests:
      cpu: 100m
      memory: 256Mi
    limits:
      cpu: 1000m
      memory: 1Gi

  extraArgs:
    - --parallelismdiff=5

# Configuration optimizations
configs:
  params:
    reposerver.parallelism: 8